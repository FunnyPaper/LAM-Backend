FROM node:20-alpine

WORKDIR /app

COPY package*.json ./
RUN npm install

COPY --exclude=**/test* . .

EXPOSE 3000

ARG TYPE=local
ENV TYPE=${TYPE}

CMD ["/bin/sh", "-c", "/app/docker/run.dev.sh"]
